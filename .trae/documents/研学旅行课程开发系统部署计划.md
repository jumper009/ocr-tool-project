# 研学旅行课程开发系统部署计划

## 当前系统状态

系统已经完成开发，所有核心功能模块都已实现，但部署前需要满足一些环境依赖。

### 已完成的工作
- ✅ 后端Express框架搭建
- ✅ MongoDB数据库模型设计
- ✅ AI大模型API集成
- ✅ 前端React+TypeScript项目开发
- ✅ 所有功能模块实现（需求分析、框架生成、内容推荐、行程优化、评估构建）
- ✅ RESTful API接口设计

### 需要准备的环境

1. **Node.js环境**
   - 版本要求：v18.x或更高
   - 已安装npm或yarn包管理器

2. **MongoDB数据库**
   - 版本要求：v5.x或更高
   - 需要创建一个数据库实例（默认数据库名：studyTravel）
   - 确保MongoDB服务正常运行

3. **OpenAI API密钥**
   - 需要有效的OpenAI API密钥用于AI功能
   - 存储在后端`.env`文件中

## 部署步骤

### 1. 环境准备

#### 安装Node.js
- 从官网下载并安装：https://nodejs.org/
- 验证安装：`node --version` 和 `npm --version`

#### 安装MongoDB
- 从官网下载并安装：https://www.mongodb.com/
- 启动MongoDB服务
- 验证服务运行：`mongod --version`

#### 获取OpenAI API密钥
- 登录OpenAI控制台：https://platform.openai.com/
- 创建API密钥

### 2. 后端部署

#### 配置环境变量
- 在`server`目录下创建`.env`文件
- 添加以下内容：
  ```
  PORT=5000
  MONGO_URI=mongodb://localhost:27017/studyTravel
  OPENAI_API_KEY=your-openai-api-key
  ```

#### 安装依赖
```bash
cd server
npm install
```

#### 启动后端服务
```bash
npm run dev
# 或使用pm2等进程管理工具
pm install -g pm2
pm run build  # 如果有构建步骤
pm2 start index.js
```

### 3. 前端部署

#### 配置API地址
- 在`client/src/services/api.ts`中配置后端API地址
- 默认：`baseURL: 'http://localhost:5000/api'`

#### 安装依赖
```bash
cd client
npm install
```

#### 构建生产版本
```bash
npm run build
```

#### 部署构建产物
- 将`dist`目录部署到静态文件服务器（如Nginx、Apache）
- 或使用Vercel、Netlify等托管服务

### 4. 验证部署

1. **检查后端服务**
   - 访问：`http://localhost:5000/`
   - 预期返回：`研学旅行课程开发系统 API`

2. **检查前端应用**
   - 访问前端部署地址（如：`http://localhost:5173/`）
   - 预期看到系统登录界面或主页

3. **测试核心功能**
   - 测试课程需求分析功能
   - 测试AI生成功能
   - 测试数据存储和读取

## 部署选项

### 本地开发环境
适合开发和测试，使用本地MongoDB和Node.js环境

### 云服务器部署
适合生产环境，推荐使用：
- **数据库**：MongoDB Atlas（云MongoDB服务）
- **后端**：AWS EC2、Azure VM或阿里云ECS
- **前端**：AWS S3+CloudFront、Vercel或Netlify

### Docker容器化部署
（可选）使用Docker-compose一键部署：
- 需要编写Dockerfile和docker-compose.yml
- 包含MongoDB、后端和前端服务

## 注意事项

1. **安全性**
   - 确保API密钥和数据库连接字符串安全存储
   - 生产环境建议使用HTTPS
   - 配置适当的CORS策略

2. **性能优化**
   - 考虑使用缓存机制
   - 优化数据库查询
   - 考虑负载均衡（如果预期用户量较大）

3. **监控和维护**
   - 设置日志监控
   - 定期备份数据库
   - 关注系统性能指标

## 预期部署时间

完成环境准备后，部署过程预计需要30-60分钟。

## 后续支持

部署完成后，我们可以提供以下支持：
- 系统功能测试
- 性能优化建议
- 安全配置检查
- 系统使用培训